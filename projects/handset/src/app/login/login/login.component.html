<mat-toolbar color="primary" class="mat-elevation-z4">
  登录
</mat-toolbar>

<div class="container mx-auto">
  <div class="flex flex-wrap">
    <div class="md:ml-[33.333333%] md:w-1/3 w-full">
      @let _model = model();
      <form class="login-form mt-2 md:mt-3 lg:mt-4" #loginForm="ngForm">
        <mat-form-field class="form-field">
          <input name="username" matInput type="text" placeholder="用户名"
            [(ngModel)]="_model.userName" required #username="ngModel"
            autocomplete="username" />
          @if (_model.userName) {
            <button mat-icon-button matSuffix aria-label="Clear"
              (click)="_model.userName = ''">
              <mat-icon>close</mat-icon>
            </button>
          }
        </mat-form-field>
        <mat-form-field class="form-field">
          <input name="password" matInput type="password" placeholder="密码"
            [(ngModel)]="_model.password" required #password="ngModel"
            autocomplete="current-password"/>
          @if (_model.password) {
            <button mat-icon-button matSuffix aria-label="Clear"
              (click)="_model.password = ''">
              <mat-icon>close</mat-icon>
            </button>
          }
        </mat-form-field>
        <div class="form-field">
          <mat-checkbox name="isPersistent" [(ngModel)]="_model.isPersistent">
            记住我
          </mat-checkbox>
        </div>
        <button class="login-button" type="button" mat-raised-button color="primary"
          (click)="login()" [disabled]="(username.invalid || password.invalid)"
          cdkFocusInitial>
          @if (loading()) {
            <ng-container>
              <mat-icon class="mat-icon-spinner">refresh</mat-icon> 登录中 ...
            </ng-container>
          }
          @else {
            登录
          }
        </button>
      </form>
    </div>
  </div>
</div>
